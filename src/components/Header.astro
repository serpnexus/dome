---
import { getLangFromUrl, useTranslations } from '../i18n/utils';
import LanguageSwitcher from './LanguageSwitcher.astro';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const navigation = [
  { href: lang === 'en' ? '/' : `/${lang}`, label: t('nav.home') },
  { href: `/tools`, label: "Tools" },
  { href: `/blog`, label: t('nav.blog') },
  { href: `/unicode`, label: t('nav.unicode') },
];
---

<nav class="fixed top-2.5 left-0 right-0 w-full z-50 animate-[slideDown_0.6s_cubic-bezier(0.4,0,0.2,1)]">
  <div class="max-w-1200 mx-auto p-2 flex items-center justify-between backdrop-blur-md border border-yellow-400/20 rounded-xl shadow-[0_8px_32px_rgba(18,28,65,0.4),inset_0_1px_0_rgba(255,215,0,0.2),inset_0_-1px_0_rgba(18,28,65,0.2)]">
    <a href={lang === 'en' ?  '/' : `/${lang}`} class="flex items-center text-xl font-bold text-white no-underline relative overflow-hidden hover:text-yellow-400 transition-colors duration-300">
      <img src="/images/logo.webp" alt="Invisible Text Logo" class="w-10 h-10 mr-1" width="40" height="40" loading="eager" decoding="async">
      InvisibleText
    </a>
    
    <div class="flex items-center gap-8">
      <ul class="hidden md:flex items-center gap-6 list-none m-0 p-0">
        {navigation.map(({ href, label }) => (
          <li class="relative">
            <a href={href} class="relative px-4 py-2 text-sm text-white/90 no-underline rounded-lg transition-all duration-300 hover:bg-yellow-400/10 hover:text-yellow-400 hover:-translate-y-0.5 focus:outline-2 focus:outline-yellow-400 focus:outline-offset-2 focus:rounded">
              {label}
            </a>
          </li>
        ))}
      </ul>
      
      <LanguageSwitcher class="bg-yellow-400/8 backdrop-blur-md border border-yellow-400/25 rounded-xl transition-all duration-300 hover:bg-yellow-400/20 hover:-translate-y-0.5 shadow-[0_8px_32px_rgba(18,28,65,0.4),inset_0_1px_0_rgba(255,215,0,0.2),inset_0_-1px_0_rgba(18,28,65,0.2)] hover:shadow-[0_12px_40px_rgba(18,28,65,0.5),inset_0_1px_0_rgba(255,215,0,0.3)]" /> 
    </div>
  </div>
</nav>

<!-- Add this spacer to prevent content from hiding behind the navbar -->
<div class="h-20 w-full"></div>

<style>
  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Responsive design */
  @media (max-width: 767px) {
    .h-20 {
      height: 4.5rem;
    }
  }

  /* Dark theme optimizations */
  @media (prefers-color-scheme: dark) {
    nav > div {
      background: rgba(255, 215, 0, 0.05);
      border-color: rgba(255, 215, 0, 0.15);
    }
    
    .bg-yellow-400\/8 {
      background: rgba(255, 215, 0, 0.03);
    }
    
    .border-yellow-400\/25 {
      border-color: rgba(255, 215, 0, 0.12);
    }
  }

  /* Enhanced accessibility */
  @media (prefers-reduced-motion: reduce) {
    nav {
      animation: none;
    }
    
    nav a,
    nav > div > div > div:last-child > div {
      transition: none;
    }
  }
</style>
